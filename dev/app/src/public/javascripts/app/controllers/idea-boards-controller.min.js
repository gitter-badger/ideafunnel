ideafunnelMainApp.controller("IdeaBoardsController",["$scope","$http","$location",function(a,c,b){a.$emit("navChange","boards");a.globalSearch="";a.loadAllIdeaBoards=function(){c.post("/api/idea-boards/all",{}).success(function(d){if(d.status&&d.status==="ok"){a.ideaBoards=d.data}else{handleError("Could not load idea boards",d)}}).error(function(d){handleError("An error occurred loading idea boards",d)})};a.viewIdeaBoard=function(d){if(d&&d._id){a.$emit("selectedBoardChange",d);b.path("/boards/"+d._id)}};$("body").on("keydown",function(d){if(!a.addingNew){if(!d.metaKey){if(d.keyCode===8){if(a.globalSearch.length>0){a.globalSearch=a.globalSearch.substr(0,a.globalSearch.length-1)}a.$apply();d.preventDefault();d.stopPropagation()}else{if(d.keyCode===32){a.globalSearch=a.globalSearch+" ";a.$apply();d.preventDefault();d.stopPropagation()}else{if(d.keyCode>=48){a.globalSearch=a.globalSearch+String.fromCharCode(d.keyCode);a.$apply();d.preventDefault();d.stopPropagation()}}}}}});a.$on("$destroy",function(){$("body").off("keydown")});a.loadAllIdeaBoards()}]);