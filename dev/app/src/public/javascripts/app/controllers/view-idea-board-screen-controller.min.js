ideafunnelApp.controller("ViewIdeaBoardVotesController",["$scope","$http",function(b,e){var d=8000;var a=1500;var c=10000;b.ideaBoard={};b.showCard=true;b.currentIdeaIndex=0;b.newIdeas=[];b.sinceDate=new Date();b.checkForNewIdeas=function(){postWithErrorHandling(e,"/api/idea-boards/"+b.ideaBoardId+"/all",{since:b.sinceDate},"Could not refresh",function(h,g){if(!h&&g&&g.length>0){for(var f=0;f<g.length;f++){b.newIdeas.push(g[f]);b.sinceDate=g[0].creationDate}}})};setInterval(function(){b.checkForNewIdeas()},c);setInterval(function(){if(b.ideas&&b.ideas.length>0){$("#mainCard").addClass("animated rollOut");setTimeout(function(){$("#mainCard").hide();$("#mainCard").removeClass("animated rollOut");if(b.newIdeas.length>0){b.currentIdea=b.newIdeas[0];b.newIdeas.splice(0,1);b.ideas.push(b.currentIdea)}else{b.currentIdeaIndex++;if(b.currentIdeaIndex>=b.ideas.length){b.currentIdeaIndex=0}b.currentIdea=b.ideas[b.currentIdeaIndex]}b.$apply();$("#mainCard").removeClass("animated rollIn");$("#mainCard").addClass("animated rollIn");$("#mainCard").show()},a)}},d);b.initIdeaBoard=function(g,f){b.ideaBoardId=g;b.username=f;getWithErrorHandling(e,"/api/idea-boards/view/"+g,"Could not retrieve board",function(i,h){b.ideaBoard=h;getWithErrorHandling(e,"/api/idea-boards/"+g+"/all","Could not load ideas",function(k,j){b.ideas=j;if(b.ideas&&b.ideas.length>0){b.currentIdea=b.ideas[0];b.currentIdeaIndex=0;b.sinceDate=b.ideas[0].creationDate}})})}}]);