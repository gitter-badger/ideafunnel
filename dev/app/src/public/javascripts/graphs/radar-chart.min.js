var RadarChart={draw:function(a,m,r){var k={radius:5,w:300,h:300,factor:1,factorLegend:0.9,levels:6,maxValue:0,radians:2*Math.PI,opacityArea:0.5,ToRight:5,TranslateX:80,TranslateY:30,ExtraWidthX:100,ExtraWidthY:100,color:d3.scale.category10()};if("undefined"!==typeof r){for(var e in r){if("undefined"!==typeof r[e]){k[e]=r[e]}}}k.maxValue=Math.max(k.maxValue,d3.max(m,function(d){return d3.max(d.map(function(g){return g.value}))}));var p=(m[0].map(function(g,d){return g.axis}));var n=p.length;var l=k.factor*Math.min(k.w/2,k.h/2);var o=d3.format("%");d3.select(a).select("svg").remove();var h=d3.select(a).append("svg").attr("width",k.w+k.ExtraWidthX).attr("height",k.h+k.ExtraWidthY).append("g").attr("transform","translate("+k.TranslateX+","+k.TranslateY+")");var q;for(var c=0;c<k.levels-1;c++){var f=k.factor*l*((c+1)/k.levels);h.selectAll(".levels").data(p).enter().append("svg:line").attr("x1",function(j,g){return f*(1-k.factor*Math.sin(g*k.radians/n))}).attr("y1",function(j,g){return f*(1-k.factor*Math.cos(g*k.radians/n))}).attr("x2",function(j,g){return f*(1-k.factor*Math.sin((g+1)*k.radians/n))}).attr("y2",function(j,g){return f*(1-k.factor*Math.cos((g+1)*k.radians/n))}).attr("class","line").style("stroke","grey").style("stroke-opacity","0.75").style("stroke-width","0.3px").attr("transform","translate("+(k.w/2-f)+", "+(k.h/2-f)+")")}for(var c=0;c<k.levels;c++){var f=k.factor*l*((c+1)/k.levels);h.selectAll(".levels").data([1]).enter().append("svg:text").attr("x",function(g){return f*(1-k.factor*Math.sin(0))}).attr("y",function(g){return f*(1-k.factor*Math.cos(0))}).attr("class","legend").style("font-family","bariol").style("font-size","10px").attr("transform","translate("+(k.w/2-f+k.ToRight)+", "+(k.h/2-f)+")").attr("fill","#737373")}series=0;var b=h.selectAll(".axis").data(p).enter().append("g").attr("class","axis");b.append("line").attr("x1",k.w/2).attr("y1",k.h/2).attr("x2",function(j,g){return k.w/2*(1-k.factor*Math.sin(g*k.radians/n))}).attr("y2",function(j,g){return k.h/2*(1-k.factor*Math.cos(g*k.radians/n))}).attr("class","line").style("stroke","grey").style("stroke-width","1px");b.append("text").attr("class","legend").text(function(g){return g}).style("font-family","bariol").style("font-size","11px").attr("text-anchor","middle").attr("dy","1.5em").attr("transform",function(j,g){return"translate(0, -10)"}).attr("x",function(j,g){return k.w/2*(1-k.factorLegend*Math.sin(g*k.radians/n))-40*Math.sin(g*k.radians/n)}).attr("y",function(j,g){return k.h/2*(1-Math.cos(g*k.radians/n))-20*Math.cos(g*k.radians/n)});m.forEach(function(g,d){dataValues=[];h.selectAll(".nodes").data(g,function(s,t){dataValues.push([k.w/2*(1-(parseFloat(Math.max(s.value,0))/k.maxValue)*k.factor*Math.sin(t*k.radians/n)),k.h/2*(1-(parseFloat(Math.max(s.value,0))/k.maxValue)*k.factor*Math.cos(t*k.radians/n))])});dataValues.push(dataValues[0]);h.selectAll(".area").data([dataValues]).enter().append("polygon").attr("class","radar-chart-serie"+series).style("stroke-width","2px").style("stroke",k.color(series)).attr("points",function(s){var j="";for(var i=0;i<s.length;i++){j=j+s[i][0]+","+s[i][1]+" "}return j}).style("fill",function(s,t){return k.color(series)}).style("fill-opacity",k.opacityArea).on("mouseover",function(i){z="polygon."+d3.select(this).attr("class");h.selectAll("polygon").transition(200).style("fill-opacity",0.1);h.selectAll(z).transition(200).style("fill-opacity",0.7)}).on("mouseout",function(){h.selectAll("polygon").transition(200).style("fill-opacity",k.opacityArea)});series++});series=0;m.forEach(function(g,d){h.selectAll(".nodes").data(g).enter().append("svg:circle").attr("class","radar-chart-serie"+series).attr("r",k.radius).attr("alt",function(i){return Math.max(i.value,0)}).attr("cx",function(s,t){dataValues.push([k.w/2*(1-(parseFloat(Math.max(s.value,0))/k.maxValue)*k.factor*Math.sin(t*k.radians/n)),k.h/2*(1-(parseFloat(Math.max(s.value,0))/k.maxValue)*k.factor*Math.cos(t*k.radians/n))]);return k.w/2*(1-(Math.max(s.value,0)/k.maxValue)*k.factor*Math.sin(t*k.radians/n))}).attr("cy",function(s,t){return k.h/2*(1-(Math.max(s.value,0)/k.maxValue)*k.factor*Math.cos(t*k.radians/n))}).attr("data-id",function(i){return i.axis}).style("fill",k.color(series)).style("fill-opacity",0.9).on("mouseover",function(i){newX=parseFloat(d3.select(this).attr("cx"))-10;newY=parseFloat(d3.select(this).attr("cy"))-5;q.attr("x",newX).attr("y",newY).text(o(i.value)).transition(200).style("opacity",1);z="polygon."+d3.select(this).attr("class");h.selectAll("polygon").transition(200).style("fill-opacity",0.1);h.selectAll(z).transition(200).style("fill-opacity",0.7)}).on("mouseout",function(){q.transition(200).style("opacity",0);h.selectAll("polygon").transition(200).style("fill-opacity",k.opacityArea)}).append("svg:title").text(function(i){return Math.max(i.value,0)});series++});q=h.append("text").style("opacity",0).style("font-family","bariol").style("font-size","11px")}};